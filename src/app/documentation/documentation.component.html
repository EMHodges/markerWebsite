<div class="main" #container>

    <mat-card class="example-card"> 
        <h1>Getting Started</h1>
        <mat-card-content>
            <p>Please click the Download button and follow the steps below.
                <div>
                    <b>And remember:</b> 
                </div>
                <ul>
                    <li>
                        Please spend 30 minutes answering the question.
                    </li>
                    <li>
                        Answers are completely anonymous (and really appreciated) so please submit your answers no matter how far you get
                    </li>
                    <li>
                        Upload your submission to this website at the end <i>(details in the 'finished' box below)</i>
                    </li>
                </ul>

        </mat-card-content>
    </mat-card>

    <div *ngIf='(canDownload | async)'>
        <app-download></app-download>
    </div>
    <div *ngIf='(canDownload | async) === false'>

    <mat-card class="example-card" id='running_python_marker'>    
        <h2>Running the python marker</h2>
        <mat-tab-group mat-align-tabs="start">
            <mat-tab label="Chrome">
                <mat-card-content>
                    <ol>
                        <li><b>Navigate to where the python marker was downloaded to</b>
                            <ul>
                                <li>Open File Explorer</li>
                                <li>Navigate to the directory where the python marker was downloaded</li>
                                <div><i>(To download the python marker please consent to participating first by<button mat-button color='primary' (click)="navigateToEthics()">clicking here</button>)</i></div>
                            </ul>

                        </li>
                        <ng-container *ngTemplateOutlet="open_powershell"></ng-container>
                        <ng-container *ngTemplateOutlet="run_python_marker"></ng-container>
                    </ol>
                    <div class = "center">
                        <a href="http://127.0.0.1:8000">
                            <button mat-raised-button color='primary'>Run</button>
                        </a>
                    </div>
                </mat-card-content>
            </mat-tab>
            <mat-tab label="Microsoft Edge">
                <mat-card-content>
                    <span class='invalid'>*Using Chrome is recommended</span>
                    <ol>
                        <li><b>Navigate to where the python marker was downloaded to</b>
                            <ul>
                                <li>Open File Explorer</li>
                                <li>Navigate to the directory where the python marker was downloaded</li>
                                <div><i>(To download the python marker please consent to participating first by<button mat-button color='primary' (click)="navigateToEthics()">clicking here</button>)</i></div>
                            </ul>

                        </li>
                        <ng-container *ngTemplateOutlet="open_powershell"></ng-container>
                        <ng-container *ngTemplateOutlet="run_python_marker"></ng-container>
                    </ol>
                    <div class = "center">
                        <a href="http://127.0.0.1:8000">
                            <button mat-raised-button color='primary'>Run</button>
                        </a>
                    </div>
                </mat-card-content>
            </mat-tab>
          </mat-tab-group>
    </mat-card>
    </div>

    <mat-card class="example-card" id='using_marker'>
        <h2>Using the Python Marker</h2>
        <mat-card-content>
            Please spend at most <b>30 minutes</b> answering the question.
        </mat-card-content>
        <mat-card-content>
            You will need to submit your answers at the end <i>(how to do this is in the 'finished' box below)</i>
        </mat-card-content>
        <mat-card-content>
            Do not worry if you do not finish the question or complete all of the parts, please submit your answers anyway. Remember your
            submission is completely anonymous and I'm collecting answers to test the tool, not you!
        </mat-card-content>

        <mat-card-content>
            <b>Opening the question</b>
            Click the click here link to be taken to the question
        </mat-card-content>
        <mat-card-content>
            <b>
                Answering the question
            </b>
            Type (or paste) your answer into the answer box for each part.
            Click the 'run test & save' button to mark your answer - you can click this as many times as you'd like
        </mat-card-content>
        <mat-card-content>
            When you have finished answering please submit your answers - to do that follow the steps in the 'Finished' box below.
        </mat-card-content>
    </mat-card>

    <mat-card class="example-card" id='using_marker'>
        <h2>Finished</h2>
        <mat-card-content>
        Please submit your answers to this website when you are finished otherwise your answers will not count
        </mat-card-content>
        <mat-card-content>
        To do this please:   
            <ol>
                <li>Scroll to the bottom of the page on the automated marker and locate where it says 'Finished?'</li>
                <li>Click the 'Save your answers button' button</li>
                <li>Wait for 5 seconds while your answers are saved</li>
                <li>Click the 'generate file download' button to create a file containing your answers</li>
                <li>Click the button below and follow the instructions to upload your file</li>
            </ol>  
            <div class = "center">
                    <button mat-raised-button color='primary' (click)="navigateToUpload()">Upload</button>
            </div>   
        </mat-card-content>
        
    </mat-card>
</div>



<ng-template #open_powershell>
    <li><b>Open powershell</b>
        <ul>
            <li>
                In File Explorer highlight the text in the address bar (click on the white space to the left of the chevron in the address bar) - the text should turn blue 
                <img src="assets/download_screenshots/chrome/highlight_address_bar.png">
            </li>
            <li>Type 'powershell' and press the 'enter' key to open powershell
                <img src="assets/download_screenshots/chrome/type_powershell.png">
            </li>
        </ul>
    </li>
</ng-template>

<ng-template #run_python_marker>
    <li><b>Run the python marker</b>
        <ul>
            <li>Type (or copy and paste) the following:
                <ul>
                    <li><b>.\{{downloadId}}.exe runserver --noreload</b></li>
                </ul>
            </li>
            <li>Press Enter key - e.g.
                <img src="assets/download_screenshots/chrome/powershell_command.png">
                <i>(replace .\python-marker123456 with .\{{downloadId}} - and remember the <b>.</b> at the beginning!)</i>
            </li>
            <li>Wait until you see some text that looks similar to this:
                <img src="assets/download_screenshots/chrome/powershell_complete.png">
            </li>
            <li>Navigate to <a href='http://127.0.0.1:8000'>'http:127.0.0.1:8000'</a> or click the run button below to open the python marker</li>
        </ul>
    </li>
</ng-template>